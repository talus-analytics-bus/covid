{"ast":null,"code":"import _slicedToArray from \"/Users/trae/git_repositories/measles/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/trae/git_repositories/measles/src/components/map/LandingMap.js\";\nimport React from 'react';\nimport ReactMapGL, { NavigationControl, Popup } from 'react-map-gl';\nimport { Redirect } from 'react-router'; // allows clicking map to go to alerts page\n\nimport classNames from 'classnames';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport './map.scss';\nimport styles from './map.module.scss';\nimport initMap from './mapUtils';\nimport Legend from './legend/Legend';\nimport Filter from './filter/Filter';\nimport StatePopup from './statePopup/StatePopup.js';\nconst TOKEN = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\n\nconst LandingMap = ({\n  facilities\n}) => {\n  console.log('Render Map');\n\n  const _React$useState = React.useState({\n    width: '100%',\n    height: '100%',\n    longitude: -93.32713892121933,\n    latitude: 30.347997363479706,\n    zoom: 4.434850010041718\n  }),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        viewport = _React$useState2[0],\n        setViewport = _React$useState2[1];\n\n  const _React$useState3 = React.useState({}),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        selectedFacility = _React$useState4[0],\n        setSelectedFacility = _React$useState4[1];\n\n  const _React$useState5 = React.useState(''),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        selectedState = _React$useState6[0],\n        setSelectedState = _React$useState6[1];\n\n  const _React$useState7 = React.useState([]),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        selectedStateFacilities = _React$useState8[0],\n        setselectedStateFacilities = _React$useState8[1];\n\n  const _React$useState9 = React.useState([0, 0]),\n        _React$useState10 = _slicedToArray(_React$useState9, 2),\n        cursorLngLat = _React$useState10[0],\n        setCursorLngLat = _React$useState10[1];\n\n  const _React$useState11 = React.useState(false),\n        _React$useState12 = _slicedToArray(_React$useState11, 2),\n        showStatePopup = _React$useState12[0],\n        setShowStatePopup = _React$useState12[1]; // If true, redirect to alerts map, otherwise, load normal landing page.\n  // This variable is only true if the user clicks on the landing page's map.\n\n\n  const _React$useState13 = React.useState(false),\n        _React$useState14 = _slicedToArray(_React$useState13, 2),\n        redirectToAlerts = _React$useState14[0],\n        setRedirectToAlerts = _React$useState14[1];\n\n  let mapRef = React.createRef();\n  React.useEffect(() => {\n    const map = mapRef.getMap();\n    initMap(map, facilities);\n  }, []);\n  /**\n   * When the alerts map is clicked, take the user to the alerts page, if they\n   * are authorized to view it. TODO add authentication to this.\n   * @method handleClick\n   */\n\n  const handleClick = e => {\n    setRedirectToAlerts(true);\n  }; // If the user has clicked on the map, redirect them to the alerts page.\n  // Otherwise, load the normal landing page.\n\n\n  if (redirectToAlerts) return React.createElement(Redirect, {\n    push: true,\n    to: \"/alerts\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  });else return React.createElement(ReactMapGL, Object.assign({\n    ref: map => mapRef = map,\n    mapboxApiAccessToken: TOKEN,\n    mapStyle: \"mapbox://styles/traethethird/cjzfsoegd0nam1cqlrv0imonb\"\n  }, viewport, {\n    //   onViewportChange={v => setViewport(v)}\n    onClick: handleClick,\n    doubleClickZoom: false //remove 300ms delay on clicking\n    ,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: styles.landingMapOverlay,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Click here or on View button below to view emergency power threats\")), React.createElement(\"div\", {\n    style: {\n      position: 'absolute',\n      bottom: '30px',\n      left: 0,\n      padding: '10px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }));\n};\n\nexport default LandingMap;","map":{"version":3,"sources":["/Users/trae/git_repositories/measles/src/components/map/LandingMap.js"],"names":["React","ReactMapGL","NavigationControl","Popup","Redirect","classNames","styles","initMap","Legend","Filter","StatePopup","TOKEN","process","env","REACT_APP_MAPBOX_ACCESS_TOKEN","LandingMap","facilities","console","log","useState","width","height","longitude","latitude","zoom","viewport","setViewport","selectedFacility","setSelectedFacility","selectedState","setSelectedState","selectedStateFacilities","setselectedStateFacilities","cursorLngLat","setCursorLngLat","showStatePopup","setShowStatePopup","redirectToAlerts","setRedirectToAlerts","mapRef","createRef","useEffect","map","getMap","handleClick","e","landingMapOverlay","position","bottom","left","padding"],"mappings":"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","sourcesContent":["import React from 'react'\nimport ReactMapGL, { NavigationControl, Popup } from 'react-map-gl'\nimport { Redirect } from 'react-router' // allows clicking map to go to alerts page\nimport classNames from 'classnames'\n\nimport 'mapbox-gl/dist/mapbox-gl.css'\nimport './map.scss'\nimport styles from './map.module.scss'\n\nimport initMap from './mapUtils'\n\nimport Legend from './legend/Legend'\nimport Filter from './filter/Filter'\nimport StatePopup from './statePopup/StatePopup.js'\n\nconst TOKEN = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN\n\nconst LandingMap = ({ facilities }) => {\n  console.log('Render Map')\n\n  const [viewport, setViewport] = React.useState({\n    width: '100%',\n    height: '100%',\n    longitude: -93.32713892121933,\n    latitude: 30.347997363479706,\n    zoom: 4.434850010041718\n  })\n  const [selectedFacility, setSelectedFacility] = React.useState({})\n  const [selectedState, setSelectedState] = React.useState('')\n  const [selectedStateFacilities, setselectedStateFacilities] = React.useState(\n    []\n  )\n  const [cursorLngLat, setCursorLngLat] = React.useState([0, 0])\n  const [showStatePopup, setShowStatePopup] = React.useState(false)\n\n  // If true, redirect to alerts map, otherwise, load normal landing page.\n  // This variable is only true if the user clicks on the landing page's map.\n  const [redirectToAlerts, setRedirectToAlerts] = React.useState(false)\n\n  let mapRef = React.createRef()\n  React.useEffect(() => {\n    const map = mapRef.getMap()\n    initMap(map, facilities)\n  }, [])\n\n  /**\n   * When the alerts map is clicked, take the user to the alerts page, if they\n   * are authorized to view it. TODO add authentication to this.\n   * @method handleClick\n   */\n  const handleClick = e => {\n    setRedirectToAlerts(true);\n  }\n\n\n  // If the user has clicked on the map, redirect them to the alerts page.\n  // Otherwise, load the normal landing page.\n  if (redirectToAlerts) return <Redirect push to=\"/alerts\" />;\n  else return (\n    <ReactMapGL\n      ref={map => (mapRef = map)}\n      mapboxApiAccessToken={TOKEN}\n      mapStyle='mapbox://styles/traethethird/cjzfsoegd0nam1cqlrv0imonb'\n      {...viewport}\n      //   onViewportChange={v => setViewport(v)}\n      onClick={handleClick}\n      doubleClickZoom={false} //remove 300ms delay on clicking\n    >\n      <div className={styles.landingMapOverlay} >\n      <div>\n      Click here or on View button below to view emergency power threats\n      </div>\n      </div>\n      <div\n        style={{\n          position: 'absolute',\n          bottom: '30px',\n          left: 0,\n          padding: '10px'\n        }}\n      />\n    </ReactMapGL>\n  )\n}\n\nexport default LandingMap\n"]},"metadata":{},"sourceType":"module"}